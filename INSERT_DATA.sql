/*
	-- SCRIPT DE BASE DE DATOS MYSQL 5.7
	-- ARQUITECTURA DE INFORMACIÃ“N
	-- PROYECTO 4, UNA 2018
	-- GERSON VARGAS & OSVALDO AGUERO
*/

/* REF_TARIFF_TYPES */
INSERT INTO sql3265636.REF_TARIFF_TYPES VALUES(1,'TARIFFTYPE_01');
INSERT INTO sql3265636.REF_TARIFF_TYPES VALUES(2,'TARIFFTYPE_02');

/* TARIFF */
INSERT INTO sql3265636.TARIFFS VALUES(1,1,'TARIFF_01',4,'DETAIL_01');
INSERT INTO sql3265636.TARIFFS VALUES(2,2,'TARIFF_02',5,'DETAIL_02');
INSERT INTO sql3265636.TARIFFS VALUES(3,2,'TARIFF_04',5,'DETAIL_02');
INSERT INTO sql3265636.TARIFFS VALUES(4,2,'TARIFF_05',5,'DETAIL_02');
INSERT INTO sql3265636.TARIFFS VALUES(5,2,'TARIFF_06',5,'DETAIL_02');
INSERT INTO sql3265636.TARIFFS VALUES(6,2,'TARIFF_07',5,'DETAIL_02');
INSERT INTO sql3265636.TARIFFS VALUES(7,2,'TARIFF_08',5,'DETAIL_02');

/* CUSTOMER */
INSERT INTO sql3265636.CUSTOMER VALUES(1,'GERSON','GERSON@GMAIL.COM','EN LA ESCUELA',1,'FIRST CUSTOMER!');
INSERT INTO sql3265636.CUSTOMER VALUES(2,'OSVALDO','OSVALDO@GMAIL.COM','EN LA UNIVERSIDAD',1,'SECOND CUSTOMER!');


INSERT INTO sql3265636.REF_ADDRESS_TYPE VALUES(1,'BILLING');
INSERT INTO sql3265636.REF_ADDRESS_TYPE VALUES(2,'RESIDENTIAL');


INSERT INTO  sql3265636.ADDRESSES VALUES(
   1,
   'LINE 1',
   'LINE 2',
   'LINE 3',
   'HEREDIA',
   '200534',
   'HEREDIA',
   'COSTA RICA',
   'NEXT TO THE POPS ICE CREAM SHOP');
INSERT INTO  sql3265636.ADDRESSES VALUES(
   2,
   'LINE 2',
   'LINE 2',
   'LINE 2',
   'SAN JOSE',
   '200534',
   'SAN JOSE',
   'COSTA RICA',
   'AT UNA LEFT HAND');
   
  INSERT INTO sql3265636.CUSTOMER_ADDRESSES VALUES(
   1,
   1,
   1,
   1,
   CURRENT_DATE,
   DATE_ADD(CURDATE(), INTERVAL 30 DAY));
   
     INSERT INTO sql3265636.CUSTOMER_ADDRESSES VALUES(
   2,
   2,
   2,
   2,
   CURRENT_DATE,
   DATE_ADD(CURDATE(), INTERVAL 30 YEAR));

/* REF_CUSTOMER_NUMBER_TYPES */
INSERT INTO REF_CUSTOMER_NUMBER_TYPES(CUSTOMER_NUMBER_TYPE_CODE,NUMBER_TYPE_DESCRIPTION)
VALUES(1,'NUMBERTYPE_01');

INSERT INTO REF_CUSTOMER_NUMBER_TYPES(CUSTOMER_NUMBER_TYPE_CODE,NUMBER_TYPE_DESCRIPTION)
VALUES(2,'NUMBERTYPE_02');

/* CUSTOMER_PHONE_NUMBERS */
INSERT INTO CUSTOMER_PHONE_NUMBERS(CUSTOMER_PHONE_NUMBER,CUSTOMER_ID,NUMBER_TYPE_CODE,HELD_FROM_DATE,HELD_TO_DATE,OTHER_DETAILS) VALUES(33667755,1,1,CURDATE(),CURDATE(),'DETALLES');
INSERT INTO CUSTOMER_PHONE_NUMBERS(CUSTOMER_PHONE_NUMBER,CUSTOMER_ID,NUMBER_TYPE_CODE,HELD_FROM_DATE,HELD_TO_DATE,OTHER_DETAILS) VALUES(88996655,2,1,CURDATE(),CURDATE(),'DETALLES2');

/* BILL_HEADERS */
INSERT INTO BILL_HEADERS(BILL_HEADER_ID,PHONE_NUMBER,BILL_ISSUE_DATE,PAYMENT_DUE_DATE,ORIGINAL_AMOUNT_DUE,AMOUNT_OUTSTANDING) VALUES(1,88996655,CURDATE(),CURDATE(),2,4);

/* BILL_DETAIL_LINES */
INSERT INTO BILL_DETAIL_LINES(BILL_DETAIL_LINE_ID,BILL_HEADER_ID,PHONE_CALL_ID,TARIFF_ID,CALL_DURATION,CALL_COST)VALUES(1,1,1,2,50,5);

INSERT INTO sql3265636.REF_NUMBER_CALLED_TYPE VALUES(
   1,
   'OVERSEAS');
INSERT INTO sql3265636.REF_NUMBER_CALLED_TYPE VALUES(
   2,
   '0800');
   INSERT INTO sql3265636.REF_NUMBER_CALLED_TYPE VALUES(
   3,
   '0900');
INSERT INTO sql3265636.CUSTOMER_PHONE_CALLS VALUES (
   1,
  '1',
   1,
   '2243434',
   CURDATE(),
   DATE_ADD(CURDATE(), INTERVAL 1 DAY),
   'DETALLES DE LA LLAMADA.');

COMMIT;
 --- END ---

SELECT   BILLDETAIL.BILL_DETAIL_LINE_ID,
	     BILL.BILL_HEADER_ID,
         PHONENUMBER.CUSTOMER_PHONE_NUMBER,
         TARIFF.TARIFF_ID,
         TARIFF.TARIFF_NAME,
         BILLDETAIL.CALL_DURATION,
         BILLDETAIL.CALL_COST
		 FROM BILL_DETAIL_LINES BILLDETAIL 
         INNER JOIN BILL_HEADERS BILL
         	ON BILLDETAIL.BILL_HEADER_ID = BILL.BILL_HEADER_ID
         INNER JOIN CUSTOMER_PHONE_NUMBERS PHONENUMBER 
            ON BILL.PHONE_NUMBER = PHONENUMBER.CUSTOMER_PHONE_NUMBER
         INNER JOIN TARIFFS TARIFF 
            ON BILLDETAIL.TARIFF_ID = TARIFF.TARIFF_ID
WHERE BILL_DETAIL_LINE_ID = 1